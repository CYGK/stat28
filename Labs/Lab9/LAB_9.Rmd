---
title: "PCA_example"
author: "Boying"
date: "March 23, 2017"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## A simple PCA example

This is a simple example for PCA from [R Bloggers](https://www.r-bloggers.com/computing-and-visualizing-pca-in-r/). The iris dataset is perhaps the best known dataset for classification. The data set contains 3 classes of 50 instances each, where each class refers to a type of iris plant. 


```{r}
# Load data
data(iris)
head(iris, 3)
```

There are five variables in the dataset `iris`, where `Sepal.Length`, `Sepal.Width`, `Petal.Length` and `Petal.Width` are continuous and `Species` is categorical.

```{r}
names(iris)
```

Apply PCA to the four continuous variables

```{r}
# log transform on the four continuous variable
log.ir <- log(iris[, 1:4])
# the Species variable
ir.species <- iris[, 5]
 
# apply PCA - scale. = TRUE is highly advisable, but default is FALSE. 
# center and scale is used to standardize the variables prior to the application of PCA.
ir.pca <- prcomp(log.ir,
                 center = TRUE,
                 scale. = TRUE) 
```

The `print` method returns the standard deviation of each of the four PCs, and their rotation (or loadings), which are the coefficients of the linear combinations of the continuous variables.

```{r}
# print method
print(ir.pca)
```

The plot method returns a plot of the variances (y-axis) associated with the PCs (x-axis). The Figure below is useful to decide how many PCs to retain for further analysis. In this simple case with only 4 PCs this is not a hard task and we can see that the first two PCs explain most of the variability in the data.

```{r}
# plot method
plot(ir.pca, type = "l")
```

The summary method describe the importance of the PCs. The first row describe again the standard deviation associated with each PC. The second row shows the proportion of the variance in the data explained by each component while the third row describe the cumulative proportion of explained variance. We can see there that the first two PCs accounts for more than {95\%} of the variance of the data.

```{r}
# summary method
summary(ir.pca)
```

Plot the PC1 and PC2.

```{r}
colorvec <- c("red", "green", "blue")
names(colorvec) = unique(ir.species)

plot(ir.pca$x[, 1], ir.pca$x[, 2], col = unname(colorvec[ir.species]), xlab = "PC1", ylab = "PC2")
legend("topright", legend = names(colorvec), fill = unname(colorvec))
```


